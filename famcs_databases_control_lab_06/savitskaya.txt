--Лабораторная выполняется в СУБД  Oracle. 
--Cкопируйте файл  EDU6.txt  в каталог C:\TEMP .
--Раскройте файл и ознакомтесь со скриптом создания и заполнения таблиц для выполнения лабораторной. 
--База данных имеет дополнительную таблицу t_error.  
--Произведите запуск Oracle.  Запустите скрипты EDU6.txt на выполнение.
--Вставте в эту строку Ваши ФИО, номер группы, курса. ФИО                       , группа            , курс 4.      
--Файл с отчётом о выполнении лабораторной создаётся путём вставки скриптов, созданных Вами программ после пунктов 1a, 1b, 1с,2,3,4.
--Файл отчёта именуется фамилией студента  в английской транскрипции, с расширением .txt и отсылаются в систему edufpmi.by.

--1. Имеются PL_SQL-блоки, содержащий следующие операторы:
--a)
/*declare
     empnum integer; 
     begin
      insert into bonus values (505,15, 2018, 500, null);
end;*/

--b)
/*declare
     empnum integer; 
     begin
      insert into job values (1010, 'Accountant xxxxxxxxxx',5500);
end;*/

--c)
/*declare
     empnum integer; 
     begin
      select empno into empnum from emp where empno=505 or empno=403;
end;*/
--Оператор исполняемого раздела в каждом из блоков вызывает предопределённое исключение со своими предопределёнными
--кодом и сообщением. 
--Дополните блоки разделами обработки исключительных ситуаций. 
--Обработка каждой ситуации состоит в занесении в таблицу t_error предопределённых кода ошибки, 
--сообщения об ошибке и текущих даты и времени, когда ошибка произошла.

--2. Создайте анонимный блок, содержащий вставку полной записи в таблицу bonus. Блок должен
--содержать собственную исключительную ситуацию ex_one с кодом -20001 и сообщением 
--'premium more than possible by m for n months and k year', где m - превышение премиального фонда при введении очередной записи
--в таблицу bonus для  n-го месяца и k-го года.  
--Исключительная ситуация ex_one наступает при нарушении бизнес-правила: "Сумма всех премий (премии в столбце bonvalue), начисленных с начала k-го года
--за n месяцев, не может быть больше 1000*n, 2016<=k<=2021, 1<= n<=12". То есть, если премиальный фонд в 1000 денежных единиц полностью не
--израсходован в некотором месяце k-го года, то его остаток может быть израсходован в последующие месяцы этого года, но без нарушения суммарного
--премиального фонда за каждые n месяцев. Обработка ситуации состоит в удалении вставленной записи (rollback или delete) 
--при нарушении бизнес-правила и занесении кода ошибки,сообщения об ошибке 
--и времени, когда ошибка произошла, в таблицу t_error.
  
--3. Создайте анонимный блок, с собственной исключительную ситуацию ex_two с кодом -20002 и сообщением 
--"the amount of bonuses in the n-th month is less than in the previous month",
--где n+1 номер месяца в первой записи вводимой в таблицу bonus для (n+1)-го месяца(как признак завершения записей для n-го месяца).
--Исключительная ситуация ex_two наступает, при нарушении бизнес-правила: "Сумма всех премий за n-ый месяц не может быть меньше, чем
--сумма всех премий за предыдущий n-1 месяц. Как уже указано выше, признак окончания начислений за n-ый месяц - появление первой записи с новым значением 
--номера месяца n+1 (доначисление премий за предыдущие месяцы не допускается). Для января исключительная ситуация не рассматривается.
--Рассматривается только 2020 год.
--При наступлении пользовательской исключительной ситуации ex_two обработка состоит в занесении данных о ней 
--(аналогично 2) в таблицу t_error и отмене фиксации записи в таблице bonus (оператор rollback) или её удалении (delete).

--4. Создайте анонимный блок, с собственной исключительную ситуацию ex_three с кодом -20003 и сообщением 
--"more than three times in 2020". Исключительная ситуация ex_three наступает, при нарушении бизнес-правила: "Сотрудник не может
--получать в течении года больше трёх премий". Рассматривается только 2020 год. 
--При наступлении пользовательской исключительной ситуации ex_three обработка состоит в занесении данных о ней 
--(аналогично 2) в таблицу t_error и отмене фиксации записи в таблице bonus (оператор rollback) или её удалении (delete). 
 
